# .htaccess
# Auto generated by Ekklesia 360: Mon, 15 Nov 2010 23:07:42 +0000
# Please contact support@monkdevelopment.com if you have questions about this file

ErrorDocument 404 /index.php?nav=p-147928

Options +FollowSymLinks
RewriteEngine On
##EKKREDIR##RewriteCond %{HTTP_HOST} !^ec001\.monkcms\.net [NC]
##EKKREDIR##RewriteRule ^(.*)$ http://ec001.monkcms.net/$1 [R=301,L]
RewriteBase /
# ekkNav START
##################################################################################################
# IMPORTANT!
#   Do not add any custom entries to this file. They may be overwritten!
#   Add any customizations to Admin > Site > htaccess
#   If you are experiencing trouble, please contact us at support@monkdevelopment.com
##################################################################################################
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [L,R=301]
RewriteRule ^monkimages/([0-9]+)/(.+)/?$ monkimage.php?mediaDirectory=mediafiles&mediaId=$1&fileName=$2 [NC,L]
RewriteRule ^$ index.php?nav=p-147928&clickpath= [QSA,NC,L] 
RewriteRule ^media/photo-gallery(/.*)?/?$ /mcms_gallery.php?nav=p-148302&clickpath=media/photo-gallery&wildcard=$1 [QSA,NC,L]
RewriteRule ^connect/calendar(/.*)?/?$ /mcms_events.php?nav=p-149444&clickpath=connect/calendar&wildcard=$1 [QSA,NC,L]
RewriteRule ^media/messages(/.*)?/?$ /mcms_sermons.php?nav=m-2089&wildcard=/media/messages:/$1 [QSA,NC,L]
RewriteRule ^connect/news(/.*)?/?$ /mcms_articles.php?nav=p-149448&clickpath=connect/news&wildcard=$1 [QSA,NC,L]
RewriteRule ^playlists(/.*)?/?$ /mcms_page.php?nav=m-717&wildcard=/playlists:$1 [QSA,NC,L] 
RewriteRule ^songs(/.*)?/?$ /mcms_page.php?nav=m-717&wildcard=/songs:/all$1 [QSA,NC,L] 
RewriteRule ^new-here(/.*)?/?$ /mcms_page.php?nav=p-148292&clickpath=new-here&wildcard=$1 [QSA,NC,L]
RewriteRule ^connect(/.*)?/?$ /mcms_page.php?nav=p-148294&clickpath=connect&wildcard=$1 [QSA,NC,L]
RewriteRule ^contact(/.*)?/?$ /mcms_page.php?nav=p-148300&clickpath=contact&wildcard=$1 [QSA,NC,L]
RewriteRule ^media(/.*)?/?$ /mcms_page.php?nav=p-148298&clickpath=media&wildcard=$1 [QSA,NC,L]
RewriteRule ^grow(/.*)?/?$ /mcms_page.php?nav=p-148296&clickpath=grow&wildcard=$1 [QSA,NC,L]
# Good practice:
RewriteRule ^monkcode.txt/?$ / [R,NC,L]
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F]

RewriteRule ^search-results(/[a-z0-9\-\/]*)/?$ /mcms_search.php?nav=search-results&clickpath=&wildcard=$1 [QSA,NC,L]
RewriteRule ^directory-search(/[a-z0-9\-\/]*)/?$ /mcms_me.php?nav=directory-search&view=searchresults&wildcard=$1 [QSA,NC,L]
# Verify
RewriteRule ^verify/([a-z_]+)/([0-9]+)/([0-9]+)/([a-z0-9]+)/(http:\/\/?)?(.*)$ https://ssl.monkdev.com/submit-verify.php?v=$4&mid=$3&cmscode=$1&siteid=$2&success=http://$6 [NC,L]
# Logout
RewriteRule ^logout(/)?(.*)?$ /monkcms.php?m=o&logoutLocation=$2 [NC,L]

# Hopefully all these will be replaced by dynamic URL's
RewriteRule ^discussions/?$ /mcms_disc_boards.php [L,NC,QSA]
RewriteRule ^discussions/([^\/]+)/?$ /mcms_disc_categories.php?boardslug=$1 [L,NC,QSA]
RewriteRule ^discussions/([^\/]+)/?([^\/]+)?/?([0-9]+)?/?$ /mcms_disc_discussions.php?boardslug=$1&catslug=$2&page=$3 [L,NC,QSA]
RewriteRule ^discussions/([^\/]+)/?([^\/]+)?/?([^\/]+)?/?([0-9]+)?/?([0-9]+)?/?$ /mcms_disc_comments.php?boardslug=$1&catslug=$2&discid=$4&page=$5 [L,NC,QSA]
RewriteRule ^discussions/([^\/]+)/?([^\/]+)?/?([^\/]+)?/?([0-9]+)?/edit/?([0-9]+)?/?$ /mcms_disc_edit_comment.php?commentid=$5 [L,NC,QSA]
RewriteRule ^series/?$ /ekk_serieslist.php [L,NC,QSA]
RewriteRule ^series/([^\/]+)/?$ /ekk_seriespage.php?seriesslug=$1 [L,NC,QSA]
RewriteRule ^events/?$ /ekk_eventlist.php [L,NC,QSA]
RewriteRule ^teachings/?$ /ekk_teachinglist.php [L,NC,QSA]
RewriteRule ^sermons/?$ /ekk_sermonlist.php [L,NC,QSA]
RewriteRule ^sermon/([^\/]+)/?$ /ekk_sermonpage.php?sermonslug=$1&slug=$1 [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/edit/?$ /mcms_me.php?viewuserslug=$1&view=editprofile [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/messages/?$ /mcms_me.php?viewuserslug=$1&view=messages [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/blog/([a-z0-9_\-]+)/?$ /mcms_me.php?viewuserslug=$1&view=blogpost&blogpost=$2 [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/blog/?$ /mcms_me.php?viewuserslug=$1&view=blog [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/friends/?$ /mcms_me.php?viewuserslug=$1&view=friends [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/galleries/?$ /mcms_me.php?viewuserslug=$1&view=galleries [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/orders/?([a-z0-9_\-]+)?/?$ /mcms_me.php?viewuserslug=$1&view=orders&orderid=$2 [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)/events/?([a-z0-9_\-]+)?/?$ /mcms_me.php?viewuserslug=$1&view=events&eventid=$2 [L,NC,QSA]
RewriteRule ^me(/[a-z0-9_\-\@\.]+)?/?$ /mcms_me.php?viewuserslug=$1 [L,NC,QSA]
RewriteRule ^group(/[a-z0-9_\-\@\.]+)?/?$ /mcms_group.php?viewgroupslug=$1 [L,NC,QSA]
RewriteRule ^directory/search/?$ /mcms_directory.php?view=searchresults [L,NC,QSA]
RewriteRule ^directory/?$ /mcms_directory.php?view=directory [L,NC,QSA]
RewriteRule ^event/([^\/]+)/?$ /ekk_eventpage.php?slug=$1 [L,NC,QSA]
RewriteRule ^article/([^\/]+)/?$ /ekk_articlepage.php?sermonslug=$1&slug=$1 [L,NC,QSA]
RewriteRule ^events/([0-9]+)/?([0-9]+)?/?([0-9]+)?/?$ /ekk_events.php?year=$1&month=$2&day=$3 [NC,L,QSA]
RewriteRule ^0([0-9]+)0(/[a-z0-9\-\/]*)/?$ /ekk_formvalues.php?keyId=$1&wildcard=$2 [NC,L,QSA]

SetEnvIf Request_URI \.(mp4|mov|m4v|mp3|zip)$ no-gzip

# Custom rewrites

RewriteRule ^day-events/([0-9]+)/([0-9]+)/([0-9]+)/?$ /ekk_events.php?year=$1&month=$2&day=$3 [NC,L,QSA] 
RewriteRule ^article-category/([a-z0-9_\-]+)/?$ /mcms_articles.php?category=$1&groupby=category [NC,L,QSA] 
RewriteRule ^article-author/([a-z0-9_\-]+)/?$ /mcms_articles.php?author=$1&groupby=author [NC,L,QSA] 
RewriteRule ^article-month/([a-z0-9_\-]+)/?$ /mcms_articles.php?month=$1&groupby=month [NC,L,QSA] 

##################################################################################################
# ekkNav STOP

